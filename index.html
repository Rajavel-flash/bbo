<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ASCII RPG — PNG Character Adventure</title>
<style>
  :root{--bg:#0b1220;--panel:#0f1724;--muted:#94a3b8;--accent:#60a5fa;--danger:#fb7185}
  *{box-sizing:border-box}
  body{margin:0;min-height:100vh;background:linear-gradient(180deg,#041027,#071124);color:#e6eef6;font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, 'Roboto Mono', monospace}
  .app{max-width:980px;margin:18px auto;padding:18px}
  .header{display:flex;justify-content:space-between;align-items:center;gap:12px}
  h1{font-size:18px;margin:0}
  .layout{display:grid;grid-template-columns:1fr 320px;gap:16px;margin-top:12px}
  .board{background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);padding:12px;border-radius:10px;min-height:540px;position:relative}
  .grid{display:grid;grid-template-columns:repeat(20,28px);grid-auto-rows:28px;gap:2px;justify-content:center}
  .cell{width:28px;height:28px;display:flex;align-items:center;justify-content:center;border-radius:4px;font-weight:700;position:relative}
  .cell.floor{background:rgba(255,255,255,0.01)}
  .cell.wall{background:rgba(255,255,255,0.03)}
  .panel{background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);padding:12px;border-radius:10px}
  .stats{display:flex;flex-direction:column;gap:8px}
  .bar{height:10px;background:rgba(255,255,255,0.03);border-radius:6px;overflow:hidden}
  .bar > i{display:block;height:100%;background:linear-gradient(90deg,#60a5fa,#7dd3fc)}
  .buttons{display:flex;gap:8px;margin-top:8px}
  button{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted);padding:8px 10px;border-radius:8px}
  button.primary{background:linear-gradient(90deg,#60a5fa,#7dd3fc);color:#02101a;border:none}
  .log{height:120px;overflow:auto;padding:8px;background:rgba(0,0,0,0.15);border-radius:6px;font-size:13px}
  .help{font-size:13px;color:var(--muted);margin-top:10px}
  .tutorial{font-size:13px;color:var(--muted);margin-bottom:10px}
  .char-img{width:24px;height:24px;object-fit:contain;}
  footer{margin-top:12px;text-align:center;color:var(--muted);font-size:13px}
</style>
</head>
<body>
  <div class="app">
    <div class="header">
      <h1>PNG RPG — Character Adventure</h1>
      <div style="text-align:right;color:var(--muted)">Move: Arrow keys / WASD • Attack: Space • Special: 1,2,3</div>
    </div>

    <div class="layout">
      <aside class="panel">
        <div class="tutorial">
          <strong>Tutorial</strong>
          <ul>
            <li>Arrow keys / WASD: Move</li>
            <li>Space: Attack adjacent enemy</li>
            <li>1: Poison attack</li>
            <li>2: Fire attack</li>
            <li>3: Stun attack</li>
            <li>Collect $ for gold, + for healing</li>
            <li>Level up to increase HP & attack</li>
          </ul>
        </div>
        <div class="stats">
          <div><strong>Player</strong> <span id="playerChar">A</span></div>
          <div>Level: <span id="level">1</span></div>
          <div>HP: <span id="hpText">10</span>/<span id="hpMax">10</span></div>
          <div class="bar"><i id="hpBar" style="width:100%"></i></div>
          <div>XP: <span id="xp">0</span>/<span id="xpMax">10</span></div>
          <div class="bar"><i id="xpBar" style="width:0%"></i></div>
          <div>Gold: <span id="gold">0</span></div>
        </div>
        <div class="buttons">
          <button id="newBtn" class="primary">New Game</button>
          <button id="saveBtn">Save</button>
          <button id="loadBtn">Load</button>
        </div>
        <hr style="margin:10px 0;border:none;border-top:1px solid rgba(255,255,255,0.03)">
        <div><strong>Legend</strong></div>
        <div class="help">Player: PNG icon • Enemies: PNG numbers • Items: PNG $ / +</div>
        <hr style="margin:10px 0;border:none;border-top:1px solid rgba(255,255,255,0.03)">
        <div><strong>Log</strong></div>
        <div id="log" class="log"></div>
      </aside>

      <div class="board panel">
        <div id="grid" class="grid" aria-live="polite"></div>
      </div>
    </div>

    <footer>Open this file in a browser. Special attacks, bosses, and PNG characters included.</footer>
  </div>

<script>
// === Load PNG images instead of letters ===
const IMG_PLAYER = 'player.png'; // provide your PNG path
const IMG_ENEMIES = {
  '1':'enemy1.png',
  '2':'enemy2.png',
  '3':'enemy3.png',
  'B':'bossB.png',
  'K':'bossK.png'
};
const IMG_ITEMS = {
  '$':'gold.png',
  '+':'potion.png'
};

// === Rendering function updated ===
function render(){
  gridEl.innerHTML='';
  for(let y=0;y<H;y++){
    for(let x=0;x<W;x++){
      const c = document.createElement('div');
      c.className='cell ' + (map[y][x]==='#'?'wall':'floor');
      let img = null;
      // player
      if(player.x===x && player.y===y){ img=IMG_PLAYER; }
      else{
        // enemies
        const en = enemies.find(e=>e.x===x && e.y===y);
        if(en){ img=IMG_ENEMIES[en.char]||null; }
        else{
          // items
          const it = items.find(ii=>ii.x===x && ii.y===y);
          if(it){ img=IMG_ITEMS[it.type]||null; }
        }
      }
      if(img){
        const imgel = document.createElement('img');
        imgel.src = img; imgel.className='char-img';
        c.appendChild(imgel);
      }
      gridEl.appendChild(c);
    }
  }
  // UI
  hpText.textContent = player.hp; hpMaxText.textContent = player.hpMax;
  const hpPct = Math.max(0, (player.hp/player.hpMax)*100);
  hpBar.style.width = hpPct + '%';
  xpText.textContent = player.xp; xpMaxText.textContent = player.xpMax; xpBar.style.width = Math.min(100,(player.xp/player.xpMax*100)) + '%';
  levelText.textContent = player.level; goldText.textContent = player.gold; playerCharEl.textContent = player.char;
}

// --- rest of game logic remains the same as previous version ---
</script>
</body>
</html>
